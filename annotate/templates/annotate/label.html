{% extends 'base.html' %}

{% block title %}{{ project.name }}{% endblock %}

{% block content %}
<h3> Project {{ project.name }} </h3>
  <a class="btn green waves-effect waves-light {% if not request.user.is_staff %}disabled{% endif %}"
 href="{% url 'upload_audio' project_id=project.id %}">Upload audio files</a>
<a class="btn green waves-effect waves-light {% if not request.user.is_staff %}disabled{% endif %}" href="{% url 'upload_pred' project_id=project.id %}">Upload predictions</a>
<a class="btn green waves-effect waves-light {% if not request.user.is_staff %}disabled{% endif %}" href="{% url 'upload_annotations' project_id=project.id %}">Upload annotations</a>
<a class="btn green waves-effect waves-light {% if not request.user.is_staff %}disabled{% endif %}" href="{% url 'download_project' project_id=project.id %}">Download annotations</a>
<a class="btn green waves-effect waves-light {% if not request.user.is_staff %}disabled{% endif %}" href="{% url 'label' project_id=project.id %}">Label annotations</a>


<ul class="collapsible expandable">
    {% for track in tracks %}
    <li>
      <div class="collapsible-header card-panel grey lighten-3"><a href="{% url 'audiotrack_homepage' audiotrack_id=track.id %}">{{ track.name }}</a></div>
      <div class="collapsible-body">

          {% with track.annotation_set.all|first as annotation %}
          {% for el in annotation.toDict %}
        <div>

            <a class="waves-effect waves-light btn modal-trigger" onclick=""  href="#modal1" >{{el.id}}</a>

          <div id="modal1" class="modal modal-fixed-footer">
            <div class="modal-content">
              <h4>Annotation</h4>
                <div class="input-field col s12">
                <select>
                    {% for specy in list_species %}
                  <option value="" disabled selected>{{specy}}</option>
                    {% endfor %}
                </select>
              </div>
            </div>
            <div class="modal-footer">
              <button class="modal-close btn waves-effect waves-light" type="submit" name="action">Valider
                <i class="material-icons right">done</i>
              </button>
                <button class="modal-close btn waves-effect waves-light" type="submit" name="action">Annuler
                    <i class="material-icons right">highlight_off</i>
                </button>
            </div>
          </div>
                </div>

          {% endfor %}
            {% endwith %}
      </div>
    </li>
    {% endfor %}
</ul>
{% endblock %}


{% block scripts %}
<script type="text/javascript">
// console.log("Mars")

document.addEventListener('DOMContentLoaded', function() {

    var elem = document.querySelector('.collapsible.expandable');
    var instance = M.Collapsible.init(elem, {
      accordion: false
    });

    var elems = document.querySelectorAll('.modal');
    var instances = M.Modal.init(elems);

    var elemsSelect = document.querySelectorAll('select');
    var instancesSelect = M.FormSelect.init(elemsSelect);

  });

</script>

{% endblock %}